# Development Guide

## Development Workflow

### Setting Up Your Environment

1. **Install Bun** (if not already installed):

```bash
curl -fsSL https://bun.sh/install | bash
```

2. **Clone and Install**:

```bash
git clone https://github.com/LorenzoWynberg/coralinelabs.com.git
cd coralinelabs.com
bun install
```

3. **Environment Configuration**:
   Create `.env.local` with required variables:

```env
RESEND_API_KEY=re_xxxxxxxxxxxxx
```

### Running the Project

```bash
# Development mode with hot reload
bun dev

# Production build
bun build

# Production server
bun start

# Linting
bun lint
```

## Code Style Guidelines

### TypeScript

- Use explicit types for function parameters and return values
- Prefer `interface` over `type` for object shapes
- Use `const` assertions for readonly data
- Enable strict mode (already configured)

Example:

```typescript
interface ServiceProps {
  title: string;
  description: string;
  icon: React.ComponentType;
}

export function ServiceCard({ title, description, icon: Icon }: ServiceProps) {
  return (
    <div>
      <Icon />
      <h3>{title}</h3>
      <p>{description}</p>
    </div>
  );
}
```

### React Components

- Use functional components with TypeScript
- Prefer named exports over default exports for components
- Keep components small and focused (single responsibility)
- Extract reusable logic to custom hooks

Component structure:

```typescript
// 1. Imports
import { useState } from "react";
import { Button } from "@/components/ui/button";

// 2. Types
interface ComponentProps {
  // ...
}

// 3. Component
export function Component({ prop }: ComponentProps) {
  // 4. Hooks
  const [state, setState] = useState();

  // 5. Event handlers
  const handleClick = () => {
    // ...
  };

  // 6. Render
  return <div>...</div>;
}
```

### File Naming

- Components: PascalCase (e.g., `HeroSection.tsx`)
- Utilities: camelCase (e.g., `utils.ts`)
- Constants: camelCase file, UPPER_CASE exports (e.g., `constants.ts`)
- Server actions: camelCase (e.g., `contact.ts`)

### CSS and Styling

Use Tailwind utility classes following this order:

1. Layout (display, position)
2. Spacing (margin, padding)
3. Sizing (width, height)
4. Typography
5. Visual (background, border, shadow)
6. Interactive (hover, focus, active)

Example:

```tsx
<div className="flex flex-col gap-4 p-6 bg-bone rounded-lg shadow-md hover:shadow-lg transition-shadow">
```

Use the `cn()` utility for conditional classes:

```typescript
import { cn } from "@/lib/utils";

<button className={cn(
  "px-4 py-2 rounded",
  isActive && "bg-coral text-white",
  isDisabled && "opacity-50 cursor-not-allowed"
)}>
```

## Project Architecture

### App Router Structure

```
app/
├── layout.tsx        # Root layout (metadata, fonts, providers)
├── page.tsx          # Home page (composition of sections)
├── globals.css       # Global styles & theme
└── actions/          # Server actions
    └── contact.ts    # Contact form submission
```

### Component Organization

**Layout Components** (`components/layout/`)

- Shared across all pages
- Header: Navigation, logo, mobile menu
- Footer: Branding, links, copyright

**Section Components** (`components/sections/`)

- Page sections for single-page layout
- Each section is self-contained
- Props should be minimal (use constants)

**UI Components** (`components/ui/`)

- Generated by shadcn/ui CLI
- Based on Radix UI primitives
- Do not modify directly; override via className

### Data Management

All content lives in `lib/constants.ts`:

- Navigation links
- Service offerings
- Package pricing
- Team members
- Work portfolio
- Approach steps

Benefits:

- Single source of truth
- Easy content updates
- Type-safe with TypeScript
- No database needed for static content

### Server Actions

Located in `app/actions/`, these handle server-side logic:

**Contact Form** (`contact.ts`)

- Validates input with Zod
- Sends email via Resend API
- Returns typed response
- Handles errors gracefully

Example usage:

```typescript
"use client";
import { useActionState } from "react";
import { submitContactForm } from "@/app/actions/contact";

export function ContactForm() {
  const [state, formAction] = useActionState(submitContactForm, null);

  return <form action={formAction}>{/* form fields */}</form>;
}
```

## Adding New Features

### Adding a New Section

1. Create component in `components/sections/`:

```typescript
// components/sections/NewSection.tsx
export default function NewSection() {
  return (
    <section id="new-section" className="py-16 px-4">
      <div className="container mx-auto">
        <h2 className="text-3xl font-bold mb-8">New Section</h2>
        {/* content */}
      </div>
    </section>
  );
}
```

2. Import and add to `app/page.tsx`:

```typescript
import NewSection from "@/components/sections/NewSection";

export default function Home() {
  return (
    <>
      <Header />
      <main>
        {/* existing sections */}
        <NewSection />
      </main>
      <Footer />
    </>
  );
}
```

3. Add navigation link to `lib/constants.ts`:

```typescript
export const NAV_LINKS = [
  // existing links
  { href: "#new-section", label: "New Section" },
] as const;
```

### Adding a New shadcn/ui Component

```bash
bunx shadcn@latest add [component-name]
```

Example:

```bash
bunx shadcn@latest add dialog
```

This installs the component in `components/ui/` and adds required dependencies.

### Adding a New Server Action

1. Create action file in `app/actions/`:

```typescript
"use server";

import { z } from "zod";

const schema = z.object({
  // validation schema
});

export async function myAction(formData: FormData) {
  const validatedData = schema.parse({
    field: formData.get("field"),
  });

  // perform action

  return { success: true };
}
```

2. Use in client component:

```typescript
"use client";
import { useActionState } from "react";
import { myAction } from "@/app/actions/myAction";

export function MyForm() {
  const [state, formAction] = useActionState(myAction, null);

  return <form action={formAction}>{/* fields */}</form>;
}
```

## Environment Variables

### Required Variables

- `RESEND_API_KEY` - Resend API key for email sending

### Development

Store in `.env.local` (git-ignored):

```env
RESEND_API_KEY=re_xxxxxxxxxxxxx
```

### Production

Add to deployment platform (Vercel, Netlify, etc.):

- Vercel: Project Settings → Environment Variables
- Netlify: Site Settings → Build & Deploy → Environment

## Testing

### Manual Testing Checklist

- [ ] All sections load correctly
- [ ] Smooth scroll navigation works
- [ ] Mobile menu opens/closes
- [ ] Contact form validates inputs
- [ ] Contact form submits successfully
- [ ] Error messages display correctly
- [ ] Responsive design on mobile/tablet/desktop
- [ ] Images load properly
- [ ] Links work correctly

### Browser Testing

Test on:

- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Mobile Safari (iOS)
- Chrome Mobile (Android)

## Performance Optimization

### Images

- Use Next.js `Image` component for automatic optimization
- Provide `width` and `height` props
- Use WebP format when possible
- Lazy load images below the fold

### Fonts

- Fonts are optimized via Next.js font loading
- Inter and Playfair Display are self-hosted
- Subset to required characters if needed

### Code Splitting

- Next.js automatically code-splits by route
- Use dynamic imports for heavy components:

```typescript
import dynamic from "next/dynamic";

const HeavyComponent = dynamic(() => import("./HeavyComponent"), {
  loading: () => <p>Loading...</p>,
});
```

## Debugging

### Common Issues

**"Module not found"**

- Run `bun install` to ensure dependencies are installed
- Check import paths (use `@/` alias)

**Tailwind classes not working**

- Check `globals.css` is imported in `layout.tsx`
- Clear `.next` cache: `rm -rf .next`

**Form submission fails**

- Verify `RESEND_API_KEY` is set
- Check Resend API dashboard for errors
- Ensure email domain is verified

### Dev Tools

- React DevTools extension
- Next.js DevTools (built-in)
- Chrome Lighthouse for performance
- Tailwind CSS IntelliSense extension

## Git Workflow

### Branching Strategy

- `main` - Production-ready code
- `dev` - Development branch
- `feature/*` - New features
- `fix/*` - Bug fixes

### Commit Messages

Follow conventional commits:

```
feat: add team member profile cards
fix: resolve mobile menu scroll issue
docs: update README with deployment steps
style: format code with prettier
refactor: extract form validation logic
```

### Pull Request Process

1. Create feature branch from `main`
2. Make changes and commit
3. Push branch and open PR
4. Request review
5. Address feedback
6. Merge to `main` after approval

## Deployment

### Pre-Deployment Checklist

- [ ] Run `bun build` locally to ensure no errors
- [ ] Test production build: `bun start`
- [ ] Verify all environment variables are set
- [ ] Check for console errors
- [ ] Test on multiple devices
- [ ] Verify contact form works
- [ ] Check analytics/monitoring setup

### Vercel Deployment

Automatic deployment on push to `main`:

1. Code is pushed to GitHub
2. Vercel detects changes
3. Runs build process
4. Deploys to production URL

Manual deployment:

```bash
vercel deploy --prod
```

## Resources

- [Next.js Documentation](https://nextjs.org/docs)
- [React Documentation](https://react.dev)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [shadcn/ui](https://ui.shadcn.com)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Bun Documentation](https://bun.sh/docs)
